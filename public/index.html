<!DOCTYPE html>
<html lang="el">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MEDIA BAR MINIMAL</title>
<style>
body {
    background:#000;
    color:#fff;
    font-family:sans-serif;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    height:100vh;
    margin:0;
}
button {
    font-size:24px;
    padding:20px 40px;
}
</style>
</head>
<body>

<h1>MEDIA BAR TEST</h1>
<button id="start">PLAY ALERT</button>

<audio id="audio" src="alert.mp3" preload="auto"></audio>

<script>
const btn = document.getElementById('start');
const audio = document.getElementById('audio');

btn.addEventListener('click', async () => {
    audio.volume = 0.7;

    try {
        await audio.play();

        if ('mediaSession' in navigator) {
            navigator.mediaSession.metadata = new MediaMetadata({
                title: 'ALERT TEST',
                artist: 'SYSTEM',
                album: 'MEDIA BAR',
                artwork: [{
                    src: 'https://cdn-icons-png.flaticon.com/512/565/565547.png',
                    sizes: '512x512',
                    type: 'image/png'
                }]
            });

            navigator.mediaSession.setPositionState({
                duration: 300,
                playbackRate: 1,
                position: 0
            });

            navigator.mediaSession.playbackState = 'playing';
        }

        console.log('✅ Playing');
    } catch (e) {
        console.error('❌ Play failed', e);
    }
});
</script>

</body>
</html>
