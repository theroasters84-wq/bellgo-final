<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BellGo Setup Bot</title>
    <style>
        body { background: #121212; color: white; font-family: sans-serif; margin: 0; text-align: center; }
        .setup-screen { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; padding: 20px; }
        .card { background: #1e1e1e; padding: 20px; border-radius: 15px; border: 1px solid #333; width: 100%; max-width: 400px; }
        .status-item { display: flex; justify-content: space-between; margin: 15px 0; padding: 10px; border-bottom: 1px solid #333; }
        .ok { color: #00E676; }
        .error { color: #FF1744; }
        .btn-fix { background: #2962FF; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer; }
        #mainApp { display: none; } /* ÎšÏÏ…Ï†ÏŒ Î¼Î­Ï‡ÏÎ¹ Î½Î± Î´Î¿Î¸Î¿ÏÎ½ Î¿Î¹ Î¬Î´ÎµÎ¹ÎµÏ‚ */
        
        /* ALARM OVERLAY */
        #alarmOverlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: red; z-index: 9999; flex-direction: column; align-items: center; justify-content: center; }
    </style>
</head>
<body>

    <div id="setupBot" class="setup-screen">
        <div class="card">
            <h2>ğŸ¤– Setup Bot</h2>
            <p style="font-size: 12px; color: #888;">Î•Î»Î­Î³Ï‡Ï‰ Ï„Î¹Ï‚ Î¬Î´ÎµÎ¹ÎµÏ‚ Ï„Î·Ï‚ ÏƒÏ…ÏƒÎºÎµÏ…Î®Ï‚...</p>
            
            <div class="status-item">
                <span>Fully Kiosk Mode</span>
                <span id="statFully" class="error">âŒ ÎŒÏ‡Î¹</span>
            </div>

            <div class="status-item">
                <span>Overlay (Pop-up)</span>
                <button id="btnOverlay" class="btn-fix" onclick="fixOverlay()">FIX IT</button>
            </div>

            <div class="status-item">
                <span>Battery (Anti-Sleep)</span>
                <button class="btn-fix" onclick="fixBattery()">FIX IT</button>
            </div>

            <button id="btnStart" class="btn-fix" style="width:100%; margin-top:20px; background:#00E676; color:black; display:none;" onclick="enterApp()">
                Î•ÎšÎšÎ™ÎÎ—Î£Î— Î•Î¦Î‘Î¡ÎœÎŸÎ“Î—Î£
            </button>
        </div>
    </div>

    <div id="mainApp" class="setup-screen">
        <h1>ğŸ”” BellGo Active</h1>
        <button onclick="socket.emit('trigger-alarm')">Î”ÎŸÎšÎ™ÎœÎ‘Î£Î¤Î™ÎšÎ— ÎšÎ›Î—Î£Î—</button>
        <button style="background:#333; color:white; margin-top:20px;" onclick="fully.startScreensaver()">ğŸŒ™ FAKE LOCK</button>
    </div>

    <div id="alarmOverlay">
        <h1 style="font-size: 50px;">ğŸš¨ ÎšÎ›Î—Î£Î—!</h1>
        <button style="width:80%; height:40%; font-size:40px;" onclick="stopAlarm()">STOP</button>
    </div>

    <audio id="alertSound" src="alert.mp3" loop></audio>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();

        function checkPermissions() {
            if (typeof fully !== 'undefined') {
                document.getElementById('statFully').innerText = "âœ… OK";
                document.getElementById('statFully').className = "ok";

                // ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ Î±Î½ Î­Ï‡Î¿Ï…Î¼Îµ Overlay Permission
                // Î£Î·Î¼ÎµÎ¯Ï‰ÏƒÎ·: Î¤Î¿ Fully API Î¼Î±Ï‚ Î´Î¯Î½ÎµÎ¹ Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ·, Î±Î»Î»Î¬ Ï„Î¿ Android Î¸Î­Î»ÎµÎ¹ Ï„Î¿ switch ON
                document.getElementById('btnStart').style.display = "block";
            } else {
                alert("Î Î¡ÎŸÎ£ÎŸÎ§Î—: Î ÏÎ­Ï€ÎµÎ¹ Î½Î± Î±Î½Î¿Î¯Î¾ÎµÎ¹Ï‚ Ï„Î¿ site Î¼Î­ÏƒÎ± Î±Ï€ÏŒ Ï„Î¿ Fully Kiosk Browser!");
            }
        }

        // BOT Î•ÎÎ¤ÎŸÎ›Î•Î£ Î ÎŸÎ¥ "Î”Î•Î™Î§ÎÎŸÎ¥Î Î¤ÎŸÎ Î”Î¡ÎŸÎœÎŸ"
        function fixOverlay() {
            if (typeof fully !== 'undefined') {
                alert("Î¤Î¿ Bot Î¸Î± ÏƒÎµ Ï€Î¬ÎµÎ¹ ÏƒÏ„Î¹Ï‚ ÏÏ…Î¸Î¼Î¯ÏƒÎµÎ¹Ï‚ Android.\n\nğŸ‘‰ Î’ÏÎµÏ‚ Ï„Î¿ Fully Kiosk ÎºÎ±Î¹ Ï€Î¬Ï„Î± 'Allow/ÎÎ± ÎµÏ€Î¹Ï„ÏÎ­Ï€ÎµÏ„Î±Î¹'.");
                fully.requestOverlayPermission();
            }
        }

        function fixBattery() {
            if (typeof fully !== 'undefined') {
                alert("Î¤Î¿ Bot Î¸Î± Î±Î½Î¿Î¯Î¾ÎµÎ¹ Ï„Î¹Ï‚ ÏÏ…Î¸Î¼Î¯ÏƒÎµÎ¹Ï‚ Î¼Ï€Î±Ï„Î±ÏÎ¯Î±Ï‚.\n\nğŸ‘‰ Î•Ï€Î¯Î»ÎµÎ¾Îµ 'No Restrictions' Î® 'Don't Optimize'.");
                fully.requestIgnoreBatteryOptimizations();
            }
        }

        function enterApp() {
            document.getElementById('setupBot').style.display = "none";
            document.getElementById('mainApp').style.display = "flex";
            
            // Î‘Ï…Ï„ÏŒÎ¼Î±Ï„ÎµÏ‚ ÏÏ…Î¸Î¼Î¯ÏƒÎµÎ¹Ï‚ Î¼Î­ÏƒÏ‰ Bot (Native Commands)
            if (typeof fully !== 'undefined') {
                fully.setBooleanSetting("keepScreenOn", true);
                fully.setBooleanSetting("unlockScreen", true);
                fully.setBooleanSetting("bringToForeground", true);
            }
        }

        // SOCKET LISTENERS
        socket.on('ring-bell', () => {
            document.getElementById('alarmOverlay').style.display = 'flex';
            document.getElementById('alertSound').play();
            if (typeof fully !== 'undefined') {
                fully.turnScreenOn();
                fully.bringToForeground();
            }
        });

        function stopAlarm() {
            document.getElementById('alarmOverlay').style.display = 'none';
            document.getElementById('alertSound').pause();
        }

        // ÎˆÎ½Î±ÏÎ¾Î· ÎµÎ»Î­Î³Ï‡Î¿Ï…
        setInterval(checkPermissions, 3000);
    </script>
</body>
</html>
