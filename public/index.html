<!DOCTYPE html>
<html lang="el">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Media Bar Test</title>
<style>
body {
    background:#000;
    color:#fff;
    font-family:sans-serif;
    text-align:center;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    height:100vh;
    margin:0;
}
button {
    padding:20px 40px;
    font-size:22px;
    margin-top:20px;
}
#status {
    margin-top:20px;
    font-size:18px;
    color:yellow;
    width:90%;
}
</style>
</head>
<body>

<h1>MEDIA BAR TEST</h1>
<div id="status">Î‘Î½Î±Î¼Î¿Î½Î®...</div>
<button id="playBtn">PLAY SONG</button>

<!-- Î‘ÎºÎ¿Ï…ÏƒÏ„Î¹ÎºÏŒ Î±ÏÏ‡ÎµÎ¯Î¿ -->
<audio id="audio" src="test.mp3" preload="auto" loop></audio>

<script>
const audio = document.getElementById('audio');
const status = document.getElementById('status');
const log = msg => status.innerHTML = msg + "<br>" + status.innerHTML;

document.getElementById('playBtn').addEventListener('click', async () => {
    audio.volume = 0.5;
    audio.loop = true; // Î³Î¹Î± Î½Î± Î¼ÎµÎ¯Î½ÎµÎ¹ media bar Î¿ÏÎ±Ï„Î®

    try {
        await audio.play();
        log("âœ… Î¤Î¿ Ï„ÏÎ±Î³Î¿ÏÎ´Î¹ Ï€Î±Î¯Î¶ÎµÎ¹!");

        // MediaSession Î³Î¹Î± notification bar
        if ('mediaSession' in navigator) {
            navigator.mediaSession.metadata = new MediaMetadata({
                title: 'TEST SONG',
                artist: 'SYSTEM',
                album: 'Media Bar Test',
                artwork: [
                    {src:'https://cdn-icons-png.flaticon.com/512/565/565547.png', sizes:'512x512', type:'image/png'}
                ]
            });

            // Duration Î¼ÎµÎ³Î¬Î»Î·Ï‚ Î´Î¹Î¬ÏÎºÎµÎ¹Î±Ï‚ Î³Î¹Î± Î½Î± Î±Î½Î¿Î¯Î¾ÎµÎ¹ bar
            try {
                navigator.mediaSession.setPositionState({
                    duration: 600,  // 10 Î»ÎµÏ€Ï„Î¬
                    position: 0,
                    playbackRate: 1.0
                });
                log("âœ… PositionState set (10 Î»ÎµÏ€Ï„Î¬)");
            } catch(e){
                log("âš ï¸ PositionState error: " + e.message);
            }

            navigator.mediaSession.playbackState = 'playing';
            log("ğŸ‘‰ Î£ÏÏÎµ Ï„Î·Î½ Î¿Î¸ÏŒÎ½Î· Î±Ï€ÏŒ Ï€Î¬Î½Ï‰ Î³Î¹Î± Î½Î± Î´ÎµÎ¹Ï‚ media bar!");
        } else {
            log("âŒ MediaSession Î´ÎµÎ½ Ï…Ï€Î¿ÏƒÏ„Î·ÏÎ¯Î¶ÎµÏ„Î±Î¹");
        }

    } catch(e){
        log("âŒ Play failed: " + e.message);
    }
});
</script>

</body>
</html>
