<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BellGo Pro</title>
    <style>
        /* BASE STYLES */
        body { background-color: #121212; color: #fff; font-family: 'Segoe UI', sans-serif; text-align: center; margin: 0; height: 100vh; overflow: hidden; display: flex; flex-direction: column; }
        
        .screen { display: none; width: 100%; height: 100%; flex-direction: column; align-items: center; justify-content: center; }
        .active { display: flex; }

        /* INPUTS */
        input { background: #222; border: 1px solid #444; color: white; padding: 15px; font-size: 20px; width: 80%; border-radius: 8px; margin: 10px 0; text-align: center; }
        
        /* BUTTONS */
        button { padding: 15px; font-size: 18px; margin: 5px; border-radius: 8px; border: none; font-weight: bold; cursor: pointer; color: white; width: 85%; }
        .btn-green { background: #00E676; color: black; }
        .btn-blue { background: #2962FF; }
        .btn-orange { background: #FF6D00; color: black; }
        
        /* ADMIN PANEL LAYOUT */
        #adminPanel { width: 100%; height: 100%; display: flex; flex-direction: row; }
        .column { width: 50%; height: 100%; overflow-y: auto; padding: 10px; box-sizing: border-box; }
        .column h3 { border-bottom: 2px solid #333; padding-bottom: 10px; }
        
        /* STAFF BUTTONS */
        .btn-staff { width: 95%; height: 80px; font-size: 22px; margin-bottom: 15px; display: block; }
        .driver { background: #E65100; border-left: 5px solid #FFD180; }
        .waiter { background: #0D47A1; border-left: 5px solid #82B1FF; }
        .driver:active, .waiter:active { transform: scale(0.95); opacity: 0.8; }

        /* ALARM SCREEN */
        #alarmScreen { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: red; z-index: 9999; flex-direction: column; align-items: center; justify-content: center; animation: flash 0.5s infinite; }
        @keyframes flash { 0% { background: red; } 50% { background: #500; } 100% { background: red; } }
        
        .stop-btn { width: 200px; height: 200px; border-radius: 50%; background: white; color: red; font-size: 35px; border: 8px solid yellow; box-shadow: 0 0 40px rgba(0,0,0,0.5); }
    </style>

    <script src="/socket.io/socket.io.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-messaging.js"></script>
</head>
<body>

    <div id="step1" class="screen active">
        <h2>ğŸ¬ ÎŒÎ½Î¿Î¼Î± ÎœÎ±Î³Î±Î¶Î¹Î¿Ï</h2>
        <input type="text" id="inpStore" placeholder="CoffeeRoom1">
        <button class="btn-green" onclick="nextStep(2)">Î•Ï€ÏŒÎ¼ÎµÎ½Î¿</button>
    </div>

    <div id="step2" class="screen">
        <h2>ğŸ‘¤ Î¤Î¿ ÎŒÎ½Î¿Î¼Î¬ ÏƒÎ¿Ï…</h2>
        <input type="text" id="inpName" placeholder="ÎœÎ¬ÏÎ¹Î¿Ï‚">
        <button class="btn-green" onclick="nextStep(3)">Î•Ï€ÏŒÎ¼ÎµÎ½Î¿</button>
    </div>

    <div id="step3" class="screen">
        <h2>ğŸ‘” ÎŸ Î¡ÏŒÎ»Î¿Ï‚ ÏƒÎ¿Ï…</h2>
        <button class="btn-green" onclick="doLogin('admin')">ADMIN (ÎšÎ¿Ï…Î¶Î¯Î½Î±)</button>
        <button class="btn-blue" onclick="doLogin('waiter')">Î£Î•Î¡Î’Î™Î¤ÎŸÎ¡ÎŸÎ£</button>
        <button class="btn-orange" onclick="doLogin('driver')">Î”Î™Î‘ÎÎŸÎœÎ•Î‘Î£</button>
    </div>

    <div id="mainApp" class="screen">
        <div style="background: #222; width: 100%; padding: 10px;">
            <span id="displayStore" style="color:#00E676; font-weight:bold;"></span> | 
            <span id="displayUser"></span>
        </div>

        <div id="adminPanel" style="display:none;">
            <div id="driver-list" class="column" style="border-right: 1px solid #333;">
                <h3>ğŸ›µ Î”Î™Î‘ÎÎŸÎœÎ•Î™Î£</h3>
            </div>
            <div id="waiter-list" class="column">
                <h3>ğŸ¤µ Î£Î•Î¡Î’Î™Î¤ÎŸÎ¡ÎŸÎ™</h3>
            </div>
        </div>

        <div id="staffPanel" style="display:none; margin-top: 50px;">
            <h1 style="color: cyan; font-size: 40px;">ğŸŸ¢ ONLINE</h1>
            <p>Î‘Î½Î±Î¼Î¿Î½Î® Î³Î¹Î± ÎºÎ»Î®ÏƒÎ·...</p>
            <p style="color:gray; font-size:12px;">Watchdog Active</p>
        </div>
    </div>

    <div id="alarmScreen">
        <h1 style="color:white; font-size: 50px; font-weight:900;">ğŸš¨ ÎšÎ›Î—Î£Î—!</h1>
        <button class="stop-btn" onclick="Watchdog.stopPanicMode()">STOP</button>
    </div>

    <audio id="siren" src="alert.mp3" loop></audio>

    <script src="watchdog.js?v=2"></script>
    <script src="logic.js?v=2"></script>
    <script>
        // Inline Helper Î³Î¹Î± Ï„Î¿ Login UI
        function nextStep(n) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById('step'+n).classList.add('active');
        }

        function doLogin(role) {
            const store = document.getElementById('inpStore').value.trim();
            const name = document.getElementById('inpName').value.trim();
            if(!store || !name) return alert("Î£Ï…Î¼Ï€Î»Î®ÏÏ‰ÏƒÎµ Ï„Î± Ï€Î¬Î½Ï„Î±!");

            // Î•Î¼Ï†Î¬Î½Î¹ÏƒÎ· ÎºÎ±Ï„Î¬Î»Î»Î·Î»Î¿Ï… Panel
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById('mainApp').classList.add('active');

            if(role === 'admin') document.getElementById('adminPanel').style.display = 'flex';
            else document.getElementById('staffPanel').style.display = 'block';

            // ÎšÎ»Î®ÏƒÎ· Logic
            login(store, name, role, '1234');
        }
    </script>
</body>
</html>
